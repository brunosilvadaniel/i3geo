if(typeof(i3GEO)=='undefined'){i3GEO=new Array()}i3GEO.gadgets={PARAMETROS:{"mostraCoordenadasUTM":{idhtml:"mostraUTM"},"mostraCoordenadasGEO":{idhtml:"localizarxy"},"mostraEscalaNumerica":{idhtml:"escala"},"mostraBuscaRapida":{idhtml:"buscaRapida"}},mostraCoordenadasUTM:function(locaplic,id,sid){if(objposicaocursor.imgx<10||objposicaocursor.imgy<10){return}if(arguments.length==0||locaplic==""){var locaplic=i3GEO.configura.locaplic}if(arguments.length<2||locaplic==""||id==""){var id=i3GEO.gadgets.PARAMETROS.mostraCoordenadasUTM.idhtml}if(arguments.length<3||locaplic==""||id==""||sid==""){var sid=i3GEO.configura.sid}var temp=$i(id);if(!temp){return}if(temp.style.display=="block"){return}var mostra=function(retorno){temp.style.display="block";temp.innerHTML="UTM: x="+retorno.data.x+" y="+retorno.data.y+" zona="+retorno.data.zona+" datum="+retorno.data.datum;return(retorno.data)};var p=locaplic+"/classesphp/mapa_controle.php?funcao=geo2utm&x="+objposicaocursor.ddx+"&y="+objposicaocursor.ddy+"&g_sid="+sid;var cp=new cpaint();cp.set_persistent_connection(true);cp.set_response_type("JSON");cp.call(p,"geo2utm",mostra)},mostraCoordenadasGEO:function(id){if(arguments.length==0){var id=i3GEO.gadgets.PARAMETROS.mostraCoordenadasGEO.idhtml}atualizaLocalizarxy=function(){var x=objposicaocursor.dmsx.split(" ");var y=objposicaocursor.dmsy.split(" ");$i3geo_temp_xg.value=x[0];$i3geo_temp_xm.value=x[1];$i3geo_temp_xs.value=x[2];$i3geo_temp_yg.value=y[0];$i3geo_temp_ym.value=y[1];$i3geo_temp_ys.value=y[2]};if($i(id)){if(!$i("xm")){var ins="<table style='text-align:center'><tr>";ins+="<td>localiza X:&nbsp;</td>";ins+="<td>"+$inputText(id,"315","xg","grau","3","-00")+"&nbsp;</td>";ins+="<td>"+$inputText("","","xm","minuto","3","00")+"&nbsp;</td>";ins+="<td>"+$inputText("","","xs","segundo","5","00.00")+"&nbsp;</td>";ins+="<td>Y:"+$inputText("","","yg","grau","3","-00")+"&nbsp;</td>";ins+="<td>"+$inputText("","","ym","minuto","3","00")+"&nbsp;</td>";ins+="<td>"+$inputText("","","ys","segundo","5","00.00")+"</td>";var temp='var xxx = i3GEO.util.dms2dd($i("xg").value,$i("xm").value,$i("xs").value);';temp+='var yyy = i3GEO.util.dms2dd($i("yg").value,$i("ym").value,$i("ys").value);';temp+='i3GEO.navega.zoomponto(i3GEO.configura.locaplic,i3GEO.configura.sid,xxx,yyy);';ins+="<td><img  class='tic' title='zoom' onclick='"+temp+"' src='"+$im("branco.gif")+"' id=procurarxy /></td>";ins+="</tr></table>";$i(id).innerHTML=ins;$i3geo_temp_xg=$i("xg");$i3geo_temp_xm=$i("xm");$i3geo_temp_xs=$i("xs");$i3geo_temp_yg=$i("yg");$i3geo_temp_ym=$i("ym");$i3geo_temp_ys=$i("ys");if($i("img")){$i("img").addEventListener('mousemove',atualizaLocalizarxy,false)}}}},mostraEscalaNumerica:function(id){if(arguments.length==0){var id=i3GEO.gadgets.PARAMETROS.mostraEscalaNumerica.idhtml}if($i(id)){atualizaEscalaNumerica=function(escala){if(arguments.length==1)$i("i3geo_escalanum").value=escala;else $i("i3geo_escalanum").value=parseInt(objmapa.scale)};if(!$i("i3geo_escalanum")){var i=$inputText(id,"138","i3geo_escalanum",$trad("d10"),"19","");var ins="<table><tr><td>1:"+i;var temp='var nova = document.getElementById("i3geo_escalanum").value;';temp+='i3GEO.navega.aplicaEscala(i3GEO.configura.locaplic,i3GEO.configura.sid,nova);';ins+="</td><td><img src='"+$im("branco.gif")+"' class='tic' onclick='"+temp+"' /></td></tr></table>";$i(id).innerHTML=ins}if(g_funcoesNavegaMapaDefault.toString().search("atualizaEscalaNumerica()")<0){g_funcoesNavegaMapaDefault.push("atualizaEscalaNumerica()")}}},mostraBuscaRapida:function(id){if(arguments.length==0){var id=i3GEO.gadgets.PARAMETROS.mostraBuscaRapida.idhtml}if($i(id)){i3geo_buscaRapida=function(){if($i("valorBuscaRapida").value==""){alert("Digite uma palavra para busca!");return}wdocaf("300px","280px",i3GEO.configura.locaplic+"/ferramentas/buscarapida/index.htm","","","Busca rapida")}var i=$inputText(id,"180","valorBuscaRapida","digite o texto para busca","30",$trad("o2"));var ins="<table><tr><td>"+i;ins+="</td><td><img src='"+$im("branco.gif")+"' class='tic' onclick='i3geo_buscaRapida()' /></td></tr></table>";$i(id).innerHTML=ins}}}