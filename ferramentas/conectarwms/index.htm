<!DOCTYPE html>
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0">
<script src="../../js/i3geo.js"></script>
<link rel="stylesheet" type="text/css" href="../../pacotes/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="../../pacotes/bootstrap-material-design/dist/css/bootstrap-material-design.min.css">
<link rel="stylesheet" type="text/css" href="../../css/default.css">
</head>
<body id="i3geo" style='background-color: #477596; height: 400px; visibility:visible' class="yui-skin-sam bd">
		<div class='yui-navset' style='top: 0px; cursor: pointer; left: 0px; margin-left: 2px;'>
			<ul class="yui-nav" style="border-width: 0pt 0pt 0px; border-color: rgb(240, 240, 240); border-bottom-color: white;">
				<li>
					<div id='guia1' style='text-align: center; left: 0px;'>
						<a>
							<em>Servi&ccedil;os</em>
						</a>
					</div>
				</li>
				<li>
					<div id='guia2' style='text-align: center; left: 0px;'>
						<a>
							<em>Metadados</em>
						</a>
					</div>
				</li>
				<li>
					<div id='guia3' style='text-align: center; left: 0px;'>
						<a>
							<em>Lista de temas</em>
						</a>
					</div>
				</li>
			</ul>
		</div>

		<div class='container-fluid bd' id="guia1obj">
			<h5>
				<a href="../../documentacao/ajuda/The_ArcIMS_OGC_WMS_Connector.pdf" target=blank>Veja como criar web services no ARCIMS</a>
			</h5>
			<h5>
				<a href="../../documentacao/ajuda/ArcGIS9.x.html" target=blank>Veja como utilizar web services no ARCGIS</a>
			</h5>
			<h5>Digite o endere&ccedil;o do servi&ccedil;o ou escolha da lista abaixo. Utilize as guias acima para ver o resultado da conex&atilde;o. Por padr&atilde;o, utiliza-se a vers&atilde;o
				1.1.0 do GetCapabilities. Voc&ecirc; pode adicionar um outro, bastando incluir no endere&ccedil;o do servi&ccedil;o "&amp;version=1.3.0" por exemplo.</h5>

			<div class='form-group label-fixed condensed'>
				<input class="form-control input-lg" type='text' id='servico' value='' />
			</div>

			<div style="width: 100%;" class='form-group label-fixed condensed'>
				<div id=RSSwms class="input-group"></div>
			</div>
			<br>
			<div id=RSSbt style="text-align: left;"></div>
		</div>
		<div class='container-fluid' id="guia2obj">
			<p class=paragrafo>
				<input type=button id="getCapabilities" value="Descri&ccedil;&atilde;o do WMS" />
			</p>
			<div id=resultadoget style="display: block; position: relative; top: 5px; left: 1px" class=paragrafo></div>
		</div>
		<div class='container-fluid' id="guia3obj">
			<p class=paragrafo>
				Ap&oacute;s a conex&atilde;o ser estabelecida e surgir a lista de temas, selecione a camada que ser&aacute; adicionada ao mapa.
				<br>
			</p>
			<div id=textoSLD style="display: none; font-size: 10px">
				<p class=paragrafo>
					Opcionalmente vc pode indicar o tipo de representa&ccedil;&atilde;o que ser&aacute; utilizada.
					<br>
					N&atilde;o altere o tipo de representa&ccedil;&atilde;o se a camada escolhida for uma imagem (dados raster) ou se voc&ecirc; tiver d&uacute;vidas sobre ela.
					<br>
				</p>
				<div class=styled-select>
					<select id=tiporep>
						<option value="">---</option>
						<option value="poligonal">poligonal</option>
						<option value="linear">linear</option>
						<option value="pontual">pontual</option>
					</select>
				</div>
			</div>
			<div id=listatemas class=paragrafo></div>
		</div>

		<div id="aguarde">Aguarde...</div>

	<script type="text/javascript" src="index.js"></script>
	<script type="text/javascript">
		$.material.init();
		var b = new YAHOO.widget.Button("getCapabilities", {
			onclick : {
				fn : getcapabilities
			}
		});
		b.addClass("rodar");
		g_locaplic = "../..";
		iniciaListaWS();
		function iniciaListaWS() {
			g_RSSwms = new Array("");
			aguarde("block");

			if (document.getElementById("RSSwms")) {
				if (g_RSSwms.length > 0) {
					var p = g_locaplic
							+ "/classesphp/wscliente.php?funcao=listaRSSwsARRAY&rss="
							+ g_RSSwms.join("|") + "&tipo=WMS";
					var cp = new cpaint();
					//cp.set_debug(2)
					cp.set_response_type("JSON");
					cp.call(p, "listaRSSwsARRAY", mostraRetornowmsRSS);
				}
			}
		}
		function mostraRetornowmsRSS(retorno) {
			var reg = /Erro/gi;
			if (retorno.data.rss.search(reg) != -1) {
				i3GEO.janela.tempoMsg("OOps! Ocorreu um erro\n" + retorno.data);
				return;
			}
			var canais = retorno.data.canais;
			var ncanais = canais.length;
			$i("RSSbt").innerHTML = retorno.data.rss;
			var i, ins = "";
			ins += "<select class='form-control' size='5' onchange='registraws(this.value)' style='width:100%;' >";
			for (i = 0; i < ncanais; i++) {
				var caso = canais[i];
				var valor = "'" + caso.link + "','" + caso.id_ws + "','"
						+ caso.tipo_ws + "'";
				ins += "<option value=" + valor + " >" + caso.title
						+ "</option>";
			}
			ins += "</select>";
			document.getElementById("RSSwms").innerHTML = ins;
			aguarde("none");
		}
	</script>
</body>
</html>
