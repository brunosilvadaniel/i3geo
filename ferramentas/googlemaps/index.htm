<html>
<head>
<script src="../../pacotes/cpaint/cpaint2.inc.compressed.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript" src="http://maps.google.com/maps?file=api&v=1&key=ABQIAAAAg9kA9xQlYqK9iBDKaeTpgxSieGwtcPDeiUtRiq7Xa63cyLppcxTVYXnVlPwveOe-sXuXfpBeNpL6pA">
</script>
  </head>
  <body onunload="GUnload()">
    <div id="map" style="width: 320px; height: 320px"></div>
  </body>
    <script>
    //chave na producao= ABQIAAAAg9kA9xQlYqK9iBDKaeTpgxSieGwtcPDeiUtRiq7Xa63cyLppcxTVYXnVlPwveOe-sXuXfpBeNpL6pA
    //chave no desenvolvimento = ABQIAAAAg9kA9xQlYqK9iBDKaeTpgxQ_qvn5wqSkbcx9uoqrWGnUcZ7lqhRVzkJwzeDN3nQJheG7FjoxyruBIQ
	window.parent.document.getElementById("boxg").style.zIndex = 0
    navm = false; // IE
    navn = false; // netscape
    var app = navigator.appName.substring(0,1);
    if (app=='N') navn=true; else navm=true;
    docmapa = window.parent.document
    pol = window.parent.objmapa.extent
    ret = pol.split(" ")
    pt1 = (( (ret[0] * -1) - (ret[2] * -1) ) / 2) + ret[0] *1
    pt2 = (((ret[1] - ret[3]) / 2)* -1) + ret[1] *1
    pt = pt1+","+pt2
    var map = new GMap(document.getElementById("map"));
    map.addControl(new GLargeMapControl());
    map.addControl(new GMapTypeControl());
    map.setMapType(G_SATELLITE_TYPE);
    map.centerAndZoom(new GPoint(pt1,pt2), 7);
    GEvent.addListener(map, "moveend", function() {
    	ondegoogle(map);
    });
    GEvent.addListener(map, "zoomend", function() {
    	ondegoogle();
    });
    function moveMapa(bd)
    {
    	nex = bd.minX+" "+bd.minY+" "+bd.maxX+" "+bd.maxY
    	var p = window.parent.g_locaplic+"/classesphp/mapa_controle.php?funcao=mudaext&ext="+nex
    	var cp = new cpaint();
    	//cp.set_debug(2)
    	cp.set_response_type("JSON");
    	cp.call(p,"mudaExtensao",window.parent.ajaxredesenha);
    	//ondegoogle(bd);
    }
    function ondegoogle()
    {
    	var bd = map.getBoundsLatLng();
    	var xyMin = window.parent.convddtela(bd.minX,bd.minY,window.parent.document);
    	var xyMax = window.parent.convddtela(bd.maxX,bd.maxY,window.parent.document);
		var box = window.parent.$i("boxg")
		var w = xyMax[0]-xyMin[0]
		var h = xyMin[1]-xyMax[1]
		box.style.display = "block"
		box.style.width = w
		box.style.height = h
		box.style.top = xyMax[1]+"px"
		box.style.left = xyMin[0]+"px"
    	box.style.display="block"
    }
    
    function panTogoogle()
    {
    	var b = window.parent.document.getElementById("boxg");
    	b.style.display="block";
    	pol = window.parent.objmapa.extent;
    	ret = pol.split(" ");
    	pt1 = (( (ret[0] * -1) - (ret[2] * -1) ) / 2) + ret[0] *1;
    	pt2 = (((ret[1] - ret[3]) / 2)* -1) + ret[1] *1;
    	map.centerAndZoom(new GPoint(pt1,pt2),map.getZoomLevel());
    }
    ondegoogle(map);
    </script>
</html>