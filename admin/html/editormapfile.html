<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>Editor de Mapfile</title>
<style type="text/css">
/*margin and padding on body element
          can introduce errors in determining
          element position and are not recommended;
          we turn them off as a foundation for YUI
          CSS treatments. */
body {
	margin: 0;
	padding: 0;
}

#ctx {
	background: orange;
	width: 200px;
	height: 200px;
}
</style>
<script type="text/javascript" src="../js/core.js"></script>
<script src="../js/listatemas.js" type="text/javascript"></script>
<script src="../js/editormapfile.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="admin.css">

</head>
<body class=" yui-skin-sam fundoPonto">
	<center>
		<div class="bordaSuperior">&nbsp;</div>
		<div class="mascaraPrincipal" id="divGeral">
			<div id=cabecalhoPrincipal></div>
			<h1>
				Administra&ccedil;&atilde;o do i3geo - mapfiles dos temas <img
					src="../imagens/04.png" style="cursor: pointer" id=botaoAjuda />
			</h1>
			<div id="formulario" style="display: none">
				<div id="ajuda" style="display: none">
					<div class="hd">Ajuda</div>
					<div class="bd" style="height: 144px; overflow: auto">
						<p>Este formul&aacute;rio permite criar ou editar os arquivos
							mapfile que comp&otilde;em temas no i3geo.
						<p>Os arquivo .map s&atilde;o armazenados no diretório
							i3geo/temas e podem tamb&eacute;m ser editados manualmente.
						<p>Cada arquivo cont&eacute;m layers definidos conforme a
							sintaxe utilizada pelo Mapserver. Esses arquivos s&atilde;o as
							estruturas b&aacute;sicas utilizadas pelo i3geo na
							apresenta&ccedil;&atilde;o de dados e montagem das camadas que
							s&atilde;o vistas no mapa.
						<p>Após criados os mapfiles, deve-se ainda definir as
							caracter&iacute;sticas de cada LAYER.
						<p>A lista de IPs dos usu&aacute;rios que podem administrar o
							i3geo &eacute; definida no arquivo i3geo/ms_configura.php
						<p>Apenas os mapfiles que forem vinculados a um tema
							poder&atilde;o ser vistos na janela de inclus&atilde;o de temas
							na &aacute;rvore de temas. Se voc&ecirc; criou um mapfile
							manualmente, utilize a op&ccedil;&atilde;o de
							edi&ccedil;&atilde;o (&iacute;cone apresentado ao lado de cada
							mapfile) para fazer essa associa&ccedil;&atilde;o.
						<p>A op&ccedil;&atilde;o "Verifica temas sem mapfiles"
							possibilita resolver problemas decorrentes da
							elimina&ccedil;&atilde;o manual de um arquivo mapfile do
							servidor. Nesses casos, o registro no banco de dados permanece.
							Com essa op&ccedil;&atilde;o &eacute; poss&iacute;vel apagar os
							registros ou recriar o mapfile perdido.
					</div>
					<div class="ft"></div>
				</div>
				<input onclick="" type=button id=adiciona
					value="Criar um novo mapfile" /> <input onclick="" type=button
					id=semmapfiles value="Verificar temas sem mapfiles" /> <br> <br>
				Al&eacute;m de criar os mapfiles, &eacute; necess&aacute;rio definir
				as caracter&iacute;sticas de cada LAYER nas op&ccedil;&otilde;es
				abaixo. <br> Para incluir o tema nos menus, <a
					href='arvore.html'>edite a &aacute;rvore de temas </a> <br>
				<div id="letras"></div>
				<p>Mapfiles (arquivos .map existentes no diretório i3geo/temas):</p>
				<div id="tabela" style="left: -5px;"></div>
			</div>
		</div>
		<div id=logajax style="display: block"></div>
		<div id=dialogoContinua style="display: block"></div>
	</center>
	<script>
		/*
		 Title: Editor de mapfiles

		 HTML da interface de administra&ccedil;&atilde;o dos mapfiles existentes em i3geo/temas

		 Esse HTML cont&eacute;m tamb&eacute;m alguns scripts para classifica&ccedil;&atilde;o da lista de mapfiles (busca por letra)

		 Veja tamb&eacute;m:

		 <core.js>

		 <listatemas.js>

		 <editormapfile.js>

		 <classe_util.js>

		 <classe_janela.js>

		 Licenca:

		 GPL2

		 i3Geo Interface Integrada de Ferramentas de Geoprocessamento para Internet

		 Direitos Autorais Reservados (c) 2006 Minist&eacute;rio do Meio Ambiente Brasil
		 Desenvolvedor: Edmar Moretti edmar.moretti@mma.gov.br

		 Este programa &eacute; software livre; voc&ecirc; pode redistribu&iacute;-lo
		 e/ou modific&aacute;-lo sob os termos da Licen&ccedil;a P&uacute;blica Geral
		 GNU conforme publicada pela Free Software Foundation;

		 Este programa &eacute; distribu&iacute;do na expectativa de que seja &uacute;til,
		 por&eacute;m, SEM NENHUMA GARANTIA; nem mesmo a garantia impl&iacute;cita
		 de COMERCIABILIDADE OU ADEQUA&Ccedil;&Atilde;O A UMA FINALIDADE ESPEC&Iacute;FICA.
		 Consulte a Licen&ccedil;a P&uacute;blica Geral do GNU para mais detalhes.
		 Voc&ecirc; deve ter recebido uma cópia da Licen&ccedil;a P&uacute;blica Geral do
		 GNU junto com este programa; se n&atilde;o, escreva para a
		 Free Software Foundation, Inc., no endere&ccedil;o
		 59 Temple Street, Suite 330, Boston, MA 02111-1307 USA.

		 Arquivo:

		 i3geo/admin/html/editormapfile.html
		 */
	</script>

	<script>
		if (screen.availWidth > 700) {
			document.getElementById("divGeral").style.width = "700px";
		}
		if(i3GEO.util.pegaCookie("I3GEOletraAdmin")) {
			letraAtual = i3GEO.util.pegaCookie("I3GEOletraAdmin");
		}
		else{
			letraAtual = "";
		}
		function filtraLetra(letra) {
			letraAtual = letra;
			document.getElementById("tabela").innerHTML = "<span style=color:red >Aguarde...</span>";
			if (letra == "Todos") {
				letra = "";
			}
			i3GEO.util.insereCookie("I3GEOletraAdmin", letra);
			core_pegaMapfiles("montaArvore()", letra, document
					.getElementById("selFiltro").value);
		}
		//necessario para a ferramenta login e outras
		i3GEO.configura = {
			locaplic : "../.."
		};
		//
		cabecalhoGeral("cabecalhoPrincipal", "editormapfile");
		temp = function() {
			var ins = "<p>Filtrar: "
					+ "<select id='selFiltro' onchange='filtraLetra(\""
					+ letraAtual
					+ "\")' >"
					+ "<option value='' >----</option>"
					+ "<option value='link_tema,=,' >Sem fonte</option>"
					+ "<option value='download_tema,=,sim' >Permite download</option>"
					+ "<option value='download_tema,=,nao' >N&atilde;o permite download</option>"
					+ "<option value='ogc_tema,=,sim' >Permite WMS</option>"
					+ "<option value='ogc_tema,=,nao' >N&atilde;o permite WMS</option>"
					+ "<option value='kml_tema,=,sim' >Permite KML</option>"
					+ "<option value='kml_tema,=,nao' >N&atilde;o permite KML</option>"
					+ "<option value='kmz_tema,=,sim' >Permite KMZ</option>"
					+ "<option value='kmz_tema,=,nao' >N&atilde;o permite KMZ</option>"
					+ "</select>";
			ins += "&nbsp;<input onclick='filtraLetra(\""
					+ letraAtual
					+ "\")' type=checkbox id=mostraMini style=position:relative;top:2px; />Mostra a miniatura se houver";

			ins += "<p><div id=filtroDeLetras ></div>";
			document.getElementById("letras").innerHTML = ins;
			core_listaDeLetras("filtroDeLetras","filtraLetra");
			document.getElementById("formulario").style.display = "block";
			initMenu();
		}
		i3GEO.login.verificaOperacao("admin/html/editormapfile",i3GEO.configura.locaplic, temp, "sessao");
	</script>
</body>