<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Editor de Mapfile</title>
    <style type="text/css">
        /*margin and padding on body element
          can introduce errors in determining
          element position and are not recommended;
          we turn them off as a foundation for YUI
          CSS treatments. */
        body {
            margin:0;
        	padding:0;
        }
        #ctx { background:orange;width:200px;height:200px; }
	</style>
	<script type="text/javascript" src="../js/core.js"></script>
	<script src="../js/listatemas.js" type="text/javascript"></script>
	<script src="../js/editormapfile.js" type="text/javascript"></script>
	<script src="../../classesjs/classe_util.js" type="text/javascript"></script>
	<script src="../../classesjs/classe_janela.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="admin.css">
	
</head>
<body class=" yui-skin-sam fundoPonto">
<center>
<div class="bordaSuperior"  >&nbsp;</div>
<div class="mascaraPrincipal" id="divGeral">
	<div id=cabecalhoPrincipal ></div>
	<h1>Administração do i3geo - mapfiles dos temas <img src="../imagens/04.png" style="cursor:pointer" id=botaoAjuda /></h1>
	<div id="ajuda" style=display:none >
		<div class="hd">Ajuda</div>
		<div class="bd" style="height:144px;overflow:auto">
			<p>Este formulário permite criar ou editar os arquivos mapfile que compõem temas no i3geo.
			<p>Os arquivo .map são armazenados no diretório i3geo/temas e podem também ser editados manualmente.
			<p>Cada arquivo contém layers definidos conforme a sintaxe utilizada pelo Mapserver. Esses arquivos são as
			estruturas básicas utilizadas pelo i3geo na apresentação de dados e montagem das camadas que são vistas no mapa.
			<p>Após criados os mapfiles, deve-se ainda definir as características de cada LAYER.
			<p>A lista de IPs dos usuários que podem administrar o i3geo é definida no
			arquivo i3geo/ms_configura.php
			<p>Apenas os mapfiles que forem vinculados a um tema poderão ser vistos na janela de inclusão de temas na árvore de temas.
			Se você criou um mapfile manualmente, utilize a opção de edição (ícone apresentado ao lado de cada mapfile) para fazer essa associação.
			<p>A opção "Verifica temas sem mapfiles" possibilita resolver problemas decorrentes da eliminação manual de um arquivo mapfile do servidor.
			Nesses casos, o registro no banco de dados permanece. Com essa opção é possível apagar os registros ou recriar o mapfile perdido.
		</div>
		<div class="ft"></div>
	</div>
	<input onclick="adicionaLinha()" type=button id=adiciona value="Criar um novo mapfile" />
	<input onclick="adicionaLinha()" type=button id=semmapfiles value="Verificar temas sem mapfiles" />
	<br><br>
	Além de criar os mapfiles, é necessário definir as características de cada LAYER nas opções abaixo.
	<br>
	Para incluir o tema nos menus, <a href='arvore.html' >edite a árvore de temas </a>
	<br>
	<div id="letras" ></div>
	<p>Mapfiles (arquivos .map existentes no diretório i3geo/temas):</p>
	<div id="tabela" style="left:-5px;"></div>
</div>
<div id=logajax style="display:block" ></div>
<div id=dialogoContinua style="display:block" ></div>
</center>
<script>
/*
Title: Editor de mapfiles

HTML da interface de administração dos mapfiles existentes em i3geo/temas

Esse HTML contém também alguns scripts para classificação da lista de mapfiles (busca por letra)

Veja também:

<core.js>

<listatemas.js>

<editormapfile.js>

<classe_util.js>

<classe_janela.js>

Licenca:

GPL2

i3Geo Interface Integrada de Ferramentas de Geoprocessamento para Internet

Direitos Autorais Reservados (c) 2006 Ministério do Meio Ambiente Brasil
Desenvolvedor: Edmar Moretti edmar.moretti@mma.gov.br

Este programa é software livre; você pode redistribuí-lo
e/ou modificá-lo sob os termos da Licença Pública Geral
GNU conforme publicada pela Free Software Foundation;

Este programa é distribuído na expectativa de que seja útil,
porém, SEM NENHUMA GARANTIA; nem mesmo a garantia implícita
de COMERCIABILIDADE OU ADEQUAÇÃO A UMA FINALIDADE ESPECÍFICA.
Consulte a Licença Pública Geral do GNU para mais detalhes.
Você deve ter recebido uma cópia da Licença Pública Geral do
GNU junto com este programa; se não, escreva para a
Free Software Foundation, Inc., no endereço
59 Temple Street, Suite 330, Boston, MA 02111-1307 USA.

Arquivo:

i3geo/admin/html/editormapfile.html
*/
</script>

<script>
if(screen.availWidth > 700)
{document.getElementById("divGeral").style.width = "700px";}
var letras = "Todos A B C D E F G H I J K L M N O P Q R S T U V X Y Z _ 1 2 3 4 5 6 7 8 9".split(" "),
	nletras = letras.length,
	letraAtual = "Todos",
	i,
	ins = "";
	
ins += "<p>Filtrar: " +
	"<select id='selFiltro' onchange='filtraLetra(\""+letraAtual+"\")' >" +
	"<option value='' >----</option>"+
	"<option value='link_tema,=,' >Sem fonte</option>"+	
	"<option value='download_tema,=,sim' >Permite download</option>"+
	"<option value='download_tema,=,nao' >Não permite download</option>"+
	"<option value='ogc_tema,=,sim' >Permite WMS</option>"+
	"<option value='ogc_tema,=,nao' >Não permite WMS</option>"+
	"<option value='kml_tema,=,sim' >Permite KML</option>"+
	"<option value='kml_tema,=,nao' >Não permite KML</option>"+
	"<option value='kmz_tema,=,sim' >Permite KMZ</option>"+
	"<option value='kmz_tema,=,nao' >Não permite KMZ</option>"+
	"</select>";
ins += "&nbsp;<input onclick='filtraLetra(\""+letraAtual+"\")' type=checkbox id=mostraMini style=position:relative;top:2px; />Mostra a miniatura se houver"

ins += "<p>";
for(i=0;i<nletras;i++){
	ins += "<span onclick='filtraLetra(\""+letras[i]+"\")' style='color:blue;cursor:pointer;padding:1px;border: 1px solid #C8C8FA'>"+letras[i]+"</span>&nbsp;";
}	
document.getElementById("letras").innerHTML = ins;

function filtraLetra(letra){
	letraAtual = letra;
	document.getElementById("tabela").innerHTML = "<span style=color:red >Aguarde...</span>";
	if(letra == "Todos")
	{letra = "";}
	core_pegaMapfiles("montaArvore()",letra,document.getElementById("selFiltro").value);
}
cabecalhoGeral("cabecalhoPrincipal","editormapfile");
YAHOO.util.Event.addListener(window, "load", initMenu);
</script>
</body>
