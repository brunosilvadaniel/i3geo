def.scope(function(){function options(specs,context){specs||def.fail.argumentRequired('specs');var _infos={};def.each(specs,function(spec,name){var info=new OptionInfo(name,option,context,spec);_infos[info.name]=info});function resolve(name){var info=def.getOwn(_infos,name)||def.fail.operationInvalid("Undefined option '{0}'",[name]);return info.resolve()}function option(name,noDefault){var info=resolve(name);return noDefault&&!info.isSpecified?undefined:info.value}function isSpecified(name){return resolve(name).isSpecified}function specified(name){return option(name,true)}function isDefined(name){return def.hasOwn(_infos,name)}function specify(opts){return set(opts,false)}function defaults(opts){return set(opts,true)}function getDefaultValue(name){return resolve(name)._defaultValue}function set(opts,isDefault){for(var name in opts){var info=def.getOwn(_infos,name);if(info){var value=opts[name];if(value!==undefined){info.set(value,isDefault)}}}return option}option.option=option;option.specified=specified;option.isSpecified=isSpecified;option.isDefined=isDefined;option.defaultValue=getDefaultValue;option.specify=specify;option.defaults=defaults;return option}function resolvers(list){return function(optionInfo){for(var i=0,L=list.length;i<L;i++){var m=list[i];if(def.string.is(m)){m=this[m]}if(m.call(this,optionInfo)===true){return true}}}}function constantResolver(value,op){return function(optionInfo){optionInfo.specify(value);return true}}function specifyResolver(fun,op){return function(optionInfo){var value=fun.call(this,optionInfo);if(value!==undefined){optionInfo.specify(value);return true}}}function defaultResolver(fun){return function(optionInfo){var value=fun.call(this,optionInfo);if(value!==undefined){optionInfo.defaultValue(value);return true}}}options.resolvers=resolvers;options.constant=constantResolver;options.specify=specifyResolver;options.defaultValue=defaultResolver;pvc.options=options;var OptionInfo=def.type().init(function(name,option,context,spec){this.name=name;this._context=context;this.option=option;this._cast=def.get(spec,'cast');var value=def.get(spec,'value');if(value!==undefined){this._defaultValue=this.value=value}this.resolveCore=def.get(spec,'resolve');if(!this.resolveCore){this.isResolved=true}var getDefault=def.get(spec,'getDefault');if(getDefault){this._getDefault=getDefault}var data=def.get(spec,'data');if(data!=null){this.data=data}this.alias=def.array.to(def.get(spec,'alias'))}).add({isSpecified:false,isResolved:false,value:undefined,_defaultValue:undefined,resolve:function(){if(!this.isResolved){this.isResolved=true;var resolve=this._getFunProp('resolveCore');resolve.call(this._context,this);if(this.value==null){var getDefault=this._getFunProp('_getDefault');if(getDefault){var value=this.cast(getDefault.call(this._context,this));if(value!=null){delete this.isSpecified;this.value=this._defaultValue=value}}}}return this},specify:function(value){return this.set(value,false)},defaultValue:function(defaultValue){if(defaultValue!==undefined){this.set(defaultValue,true)}return this._defaultValue},cast:function(value){if(value!=null){var cast=this._getFunProp('_cast');if(cast){value=cast.call(this._context,value,this)}}return value},dynDefault:function(){var dynDefault=this._getFunProp('_dynDefault');if(dynDefault){return this.cast(dynDefault.call(this._context,this))}},set:function(value,isDefault){if(value!=null){value=this.cast(value)}if(value==null){value=this.dynDefault();if(value!=null){isDefault=true}}if(!isDefault){this.isSpecified=true;this.isResolved=true;this.value=value}else{this._defaultValue=value;if(!this.isSpecified){this.value=value}}return this},_getFunProp:function(name){var fun=this[name];if(fun){var context=this._context;if(context&&def.string.is(fun)){fun=context[fun]}}return fun}})});